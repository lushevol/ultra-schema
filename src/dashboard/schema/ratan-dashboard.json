{
  "title": "Ratan Dashboard",
  "refreshInterval": "30s",
  "panels": [
    {
      "id": "waiting-vd-today",
      "title": "Waiting VD Today",
      "type": "metric",
      "query": {
        "queries": [
          {
            "queryApi": {
              "endpoint": "SettlementCashflowsQuery",
              "payload": {
                "filter": [
                  {
                    "field": "Cashflow.Cashflow_State",
                    "operator": "EQ",
                    "values": ["WAITING"]
                  }
                ],
                "page": 0,
                "size": 1
              },
              "body": ["Cashflow.Cashflow_Id"]
            },
            "resultTransform": "response.pageInfo.totalHits"
          }
        ],
        "aggregation": "result[0]"
      },
      "layout": {
        "x": 0,
        "y": 0,
        "w": 1,
        "h": 1
      }
    },
    {
      "id": "cashflow-volume-table",
      "title": "Cashflow Volume Table",
      "type": "table",
      "query": {
        "queries": [
          {
            "queryApi": {
              "endpoint": "SettlementCashflowsQuery",
              "payload": {
                "filter": [
                  {
                    "field": "Cashflow.Cashflow_State",
                    "operator": "NOTIN",
                    "values": [
                      "NETTED",
                      "SETTLED",
                      "CANCELLED",
                      "RELEASED",
                      "DEAD"
                    ]
                  }
                ],
                "page": 0,
                "size": 10
              },
              "body": ["Cashflow.Payment_Date", "Cashflow.NSTP_Exception"]
            },
            "resultTransform": "response.results|transformCashflowVolumeAndException"
          }
        ],
        "aggregation": "result[0]"
      },
      "layout": {
        "x": 1,
        "y": 0,
        "w": 6,
        "h": 2
      }
    }
  ]
}
